<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChillOS</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

  <!-- BOOT / BIOS -->
  <div id="bootRoot" aria-label="Boot">
    <!-- BIOS POST (console-like) -->
    <div id="biosPost" class="biosPost">
      <div class="biosPostHeader">
        <div id="biosPostTitle" class="biosPostTitle">ChillOS BIOS</div>
        <div class="biosPostHint">F2 — BIOS Setup • Esc — пропустить</div>
      </div>
      <pre id="biosPostLog" class="biosPostLog"></pre>
    </div>

    <!-- BIOS menu -->
    <div id="biosMenu" class="biosMenu" aria-label="BIOS Setup">
      <div class="biosMenuTop">
        <div class="biosMenuTitle" id="biosMenuTitle">BIOS Setup</div>
        <div class="biosMenuHint">F10 — сохранить • Ctrl+S — скачать • Esc — выход</div>
      </div>

      <div class="biosGrid">
        <div class="biosNav" id="biosNav"></div>
        <div class="biosPanel">
          <div class="biosPanelTitle" id="biosPanelTitle">System</div>
          <textarea id="biosEditor" class="biosEditor" spellcheck="false"></textarea>

          <div class="biosActions">
            <button class="btn" id="biosApply">Применить</button>
            <button class="btn" id="biosSave">Сохранить (localStorage)</button>
            <button class="btn" id="biosDownload">Скачать</button>
            <button class="btn danger" id="biosReset">Сбросить overrides</button>
            <button class="btn" id="biosExit">Выход</button>
          </div>

          <div class="biosNote">
            BIOS сохраняет overrides в localStorage (браузер не может писать в файлы проекта напрямую).
            Для постоянных изменений — обновляй JSON в <code>chillos/settings</code>.
          </div>
        </div>
      </div>
    </div>

    <!-- Stage 1: black + logo -->
    <div id="stageLogo" class="stageLogo">
      <div class="stageLogoCenter">
        <img id="bootLogoImg" alt="" />
        <div id="stageLogoName" class="stageLogoName">ChillOS</div>
      </div>
    </div>

    <!-- Stage 2: blue loading -->
    <div id="stageBlue" class="stageBlue">
      <div class="stageBlueCenter">
        <div class="stageBlueTitle" id="stageBlueTitle">Загрузка</div>
        <div class="spinner" aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <!-- BSOD (black screen, white centered text) -->
  <div id="bsod" class="bsod" aria-label="Black Screen of Death">
    <div class="bsodCenter">
      <div class="bsodTitle">Система столкнулась с проблемой и должна быть перезапущена.</div>
      <div class="bsodSub">ChillOS: Чёрный экран смерти</div>

      <div class="bsodBlock">
        <div><b>Тип:</b> <span id="bsodType">—</span></div>
        <div><b>Сообщение:</b> <span id="bsodMsg">—</span></div>
        <div><b>Источник:</b> <span id="bsodSrc">—</span></div>
      </div>

      <pre class="bsodTrace" id="bsodTrace">—</pre>

      <div class="bsodBtns">
        <button class="btn" id="bsodCopy">Скопировать</button>
        <button class="btn primary" id="bsodReload">Перезапустить</button>
      </div>
    </div>
  </div>

  <!-- DESKTOP -->
  <div id="desktop" class="desktop" aria-label="Desktop">
    <div id="wallA" class="wallpaper wallA"></div>
    <div id="wallB" class="wallpaper wallB"></div>
    <div class="wallOverlay" aria-hidden="true"></div>

    <div id="watermark" class="watermark"></div>

    <div id="selectionBox" class="selectionBox" aria-hidden="true"></div>

    <div id="iconLayer" class="iconLayer" aria-label="Icons"></div>
    <div id="windowLayer" class="windowLayer" aria-label="Windows"></div>

    <!-- Start menu -->
    <div id="startMenu" class="startMenu" aria-label="Start menu">
      <div class="startTop">
        <input id="startSearch" class="startSearch" placeholder="Поиск…" />
      </div>
      <div id="startGrid" class="startGrid"></div>
    </div>

    <!-- Context menu -->
    <div id="ctxMenu" class="ctxMenu" aria-label="Context menu"></div>

    <!-- Taskbar -->
    <div class="taskbar" id="taskbar" aria-label="Taskbar">
      <div class="taskbarLeft"></div>

      <div class="taskbarCenter">
        <button class="taskBtn startBtn" id="startBtn" aria-label="Start">
          <img id="startIconImg" alt="" />
        </button>
        <div id="taskApps" class="taskApps" aria-label="Running apps"></div>
      </div>

      <div class="taskbarRight">
        <button class="taskBtn sysBtn" id="fsBtn" title="Полноэкранный режим" aria-label="Fullscreen">⛶</button>
        <button class="taskBtn sysBtn" id="powerBtn" title="Питание" aria-label="Power">⏻</button>
        <div class="clock" id="clock">--:--</div>
      </div>
    </div>

    <!-- Hover menu for taskbar icons -->
    <div id="taskHover" class="taskHover" aria-label="Task hover menu"></div>

    <!-- Toast -->
    <div id="toast" class="toast" aria-live="polite"></div>
  </div>

  <!-- User CSS overrides (from BIOS/localStorage) injected here -->
  <style id="userCss"></style>

  <script defer src="./app.js"></script>
</body>
</html>